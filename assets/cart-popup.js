document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("cart-popup"),e=document.getElementById("popup-cart-btn"),o=document.querySelector(".cart-popup-container");document.querySelector(".ts-controlbar");let n=null;function c(){n&&clearTimeout(n),setTimeout((()=>{t.classList.add("show-popup-cart"),n=setTimeout(r,5e3)}),300)}function r(){t.classList.remove("show-popup-cart"),n&&clearTimeout(n)}if(e.addEventListener("click",r),document.addEventListener("submit",(function(t){const e=t.target.closest('form[action^="/cart/add"]');if(e){t.preventDefault();const o=new FormData(e);fetch("/cart/add.js",{method:"POST",body:o}).then((t=>t.json())).then((()=>{c()})).catch(console.error)}}),!0),document.querySelectorAll(".ts-product__button").forEach((t=>{t.addEventListener("click",(()=>{setTimeout(c,700)}))})),o){function d(){const t=window.innerHeight;if(window.innerWidth>989){const t=document.querySelector(".ts-discount-popup-container");return void(o.style.bottom=t?"155px":"75px")}const e=document.querySelector(".ts-controlbar"),n=document.querySelector(".ts-sticky-add"),c=t-75,r=t-145;let d=c;if(e||n){const t=e?.getBoundingClientRect(),o=n?.getBoundingClientRect(),c=t?t.top:-1/0,r=o?o.top:-1/0;d=Math.max(c,r)}const i=75+70*((c-Math.max(Math.min(d,c),r))/(c-r));o.style.bottom=`${i}px`}window.addEventListener("scroll",d),window.addEventListener("resize",d),setInterval(d,100)}}));