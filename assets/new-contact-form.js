document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("ContactForm"),t=document.getElementById("thankYouPopup"),n=document.querySelector(".popup-thankyou__close"),o=document.getElementById("productDropdown"),a=document.getElementById("customDropdownMenu"),s=document.querySelectorAll(".product-btn"),d=document.getElementById("clearSelection"),c=document.getElementById("selectedProducts"),l=document.querySelector(".arrow---icon");let r=[];function i(){o.value=r.join(", "),o.classList.toggle("valid",r.length>0),c.value=r.join(", "),s.forEach((e=>{e.classList.toggle("active",r.includes(e.dataset.product))}))}function u(e){r.includes(e)?r=r.filter((t=>t!==e)):r.push(e),i()}s.forEach((e=>e.addEventListener("click",(()=>u(e.dataset.product))))),d.addEventListener("click",(()=>{r=[],i()})),o.addEventListener("click",(e=>{a.classList.toggle("hidden"),l.style.transform=a.classList.contains("hidden")?"rotate(0deg)":"rotate(180deg)",e.stopPropagation()})),a.querySelectorAll(".dropdown-option").forEach((e=>{e.addEventListener("click",(()=>{u(e.dataset.value),a.classList.add("hidden"),l.style.transform="rotate(0deg)"}))})),document.addEventListener("click",(e=>{a.contains(e.target)||e.target===o||(a.classList.add("hidden"),l.style.transform="rotate(0deg)")}));const m=new URLSearchParams(window.location.search),h=localStorage.getItem("lastSubmittedProducts");if("true"===m.get("contact_posted")&&t&&h){t.classList.remove("hidden"),localStorage.removeItem("lastSubmittedProducts"),"function"==typeof fbq&&fbq("track","Lead");const e=new URL(window.location);e.searchParams.delete("contact_posted"),window.history.replaceState({},document.title,e.toString()),setTimeout((()=>t.classList.add("hidden")),1e4)}n&&n.addEventListener("click",(()=>t.classList.add("hidden"))),e.addEventListener("submit",(function(t){const n=document.getElementById("ContactForm-phone"),a=document.getElementById("ContactForm-email"),s=document.getElementById("ContactForm-name"),d=document.getElementById("ContactForm-country"),l=document.getElementById("ContactForm-body"),r=/^[A-Za-zА-Яа-яЁё\s\-]{2,50}$/;let i=[];if(/^[\+0-9\-\(\)\s]{7,20}$/.test(n.value)||i.push("Please enter a valid phone number."),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.value)||i.push("Please enter a valid email address."),r.test(s.value)||i.push("Name must contain only letters, spaces, or hyphens."),r.test(d.value)||i.push("Country must contain only letters, spaces, or hyphens."),l.value.trim()||i.push("Please enter a message."),c.value.trim()?o.classList.remove("error"):(i.push("Please select at least one product."),o.classList.add("error")),i.length>0)return t.preventDefault(),e.classList.add("shake"),setTimeout((()=>e.classList.remove("shake")),500),alert(i.join("\n")),!1;localStorage.setItem("lastSubmittedProducts",c.value);const u=`📥 New request:\n🧾 Product: ${c.value}\n👤 Name: ${s.value}\n📧 Email: ${a.value}\n📱 Phone number: ${n.value}\n🌍 Country: ${d.value}\n💬 Message: ${l.value}`;fetch("https://api.telegram.org/bot7721441613:AAE00kiIVSV8OJRy5e-XPqz-am2BxRW2cDw/sendMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:"-1002619425687",text:u})})}))}));