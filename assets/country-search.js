document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("transportSwitcher").querySelectorAll(".switch-option"),e=document.getElementById("switchIndicator");let o=0;t.forEach(((t,e)=>{t.classList.contains("switch-active")&&(o=e)})),e.style.left=50*o+"%";const c=t[o].dataset.type;document.querySelectorAll(".region-container").forEach((t=>{const e=t.dataset.vehicle;t.style.display=e&&e!==c?"none":"block"})),t.forEach(((o,c)=>{o.addEventListener("click",(()=>{t.forEach((t=>t.classList.remove("switch-active"))),o.classList.add("switch-active"),e.style.left=50*c+"%";const n=o.dataset.type;document.querySelectorAll(".region-container").forEach((t=>{const e=t.dataset.vehicle;t.style.display=e&&e!==n?"none":"block"}))}))}))})),document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("transportSwitcher").querySelectorAll(".switch-option"),e=document.getElementById("switchIndicator"),o=document.querySelector("#region-search"),c=document.querySelector(".clear_button"),n=document.querySelectorAll(".region-button"),s=document.querySelectorAll(".region-container"),i=document.querySelectorAll(".region-dropdown"),r=document.querySelectorAll(".city-dropdown");let l=2*document.querySelector(".region-cities a").scrollHeight+15;window.innerWidth<1e3&&(l=4*document.querySelector(".region-cities a").scrollHeight+35);let a=new URLSearchParams(document.location.search);const d=a.get("region"),u=a.get("vehicle");u&&function(t){const e=document.querySelectorAll(".switch-option");e.forEach(((o,c)=>{o.dataset.type.toLowerCase()===t.toLowerCase()&&(e.forEach((t=>t.classList.remove("switch-active"))),o.classList.add("switch-active"),document.getElementById("switchIndicator").style.left=50*c+"%")}))}(u),d&&(!function(t){const e=t.toLowerCase().trim();n.forEach((t=>{const o=t.dataset.region?.toLowerCase().trim();o===e&&t.classList.add("active-button")}))}(d),n.forEach((t=>{const e=t.dataset.region;if(e.toLowerCase().trim()===d.toLowerCase().trim()&&t.classList.contains("dropdown-button")){const t=document.querySelector(`.city-dropdown[data-region='${e}']`);t&&(t.classList.add("open-city-dropdown"),t.querySelector(".hide-city_button").style.opacity="1",t.querySelector(".hide-city_button").style.pointerEvents="all",t.querySelector(".show-city_button").style.pointerEvents="none",t.querySelector(".show-city_button").style.opacity="0")}})),h());let y=0;function h(){const t=o.value.trim().toLowerCase(),e=t.split(/\s+/).filter(Boolean),c=document.querySelector(".no-found-alert"),r=document.querySelector(".switch-option.switch-active")?.dataset.type||"",a=document.querySelector(".region-button.active-button")?.dataset.region||"";let d=!1;if(n.forEach((t=>{const e=t.dataset.vehicle||"",o=e.split(",").map((t=>t.trim())),c=o.includes(r)||o.includes("car,moto")||!e;t.style.display=c?"block":"none"})),"universal"===a)return s.forEach((t=>{t.style.display="none"})),i.forEach((t=>{t.style.display="none"})),void(c&&(c.style.display="none"));i.forEach((t=>{const o=t.dataset.city?.toLowerCase()||"",c=t.dataset.region||"",n=t.dataset.filter||"car";let s=[];try{s=n.split(",").map((t=>t.trim().toLowerCase()))}catch{s=[n.toLowerCase()]}const i=[o,...s].join(" "),l=0===e.length||e.every((t=>i.includes(t))),u=s.includes(r.toLowerCase())||s.includes("car,moto"),y=l&&u&&(!a||c===a);t.style.display=y?"block":"none",y&&(d=!0)})),s.forEach((t=>{const o=t.dataset.region||"",c=t.dataset.vehicle||"",n=t.querySelectorAll("a");let s=!1;n.forEach((t=>{const n=t.dataset.city?.toLowerCase()||"",i=t.dataset.filter||"";let l=[];try{l=JSON.parse(i.toLowerCase())}catch{l=i.split(",").map((t=>t.trim().toLowerCase()))}const d=[n,...l].join(" "),u=(0===e.length||e.every((t=>d.includes(t))))&&(!c||c===r)&&(!a||o===a);t.parentElement.style.display=u?"block":"none",u&&(s=!0)})),t.style.display=s?"block":"none",s&&(d=!0)})),document.querySelectorAll(".show-city_button,.hide-city_button").forEach((e=>{e.style.display=""===t?"flex":"none"})),document.querySelectorAll(".city-dropdown .region-cities").forEach((e=>{e.style.maxHeight=""===t?l+"px":"10000px"})),c&&(c.style.display=d?"none":"flex")}function p(){const t=this.classList.contains("active-button");n.forEach((t=>t.classList.remove("active-button"))),t?this.classList.remove("active-button"):this.classList.add("active-button"),h()}function m(t){if(t.target.closest(".show-city_button")&&(this.classList.add("open-city-dropdown"),this.querySelector(".hide-city_button").style.opacity="1",this.querySelector(".hide-city_button").style.pointerEvents="all",this.querySelector(".show-city_button").style.opacity="0",this.querySelector(".show-city_button").style.pointerEvents="none"),t.target.closest(".hide-city_button")){this.classList.remove("open-city-dropdown");const t=this.querySelector(".show-city_button"),e=this.getBoundingClientRect().top+window.scrollY,o=window.innerHeight/2;window.scrollTo({top:e-o,behavior:"smooth"}),setTimeout((()=>{t.style.opacity="1",t.style.pointerEvents="all"}),500)}}function w(){const t=document.querySelector(".switch-option.switch-active")?.dataset.type||"";document.querySelectorAll(".ts-products-list").forEach((e=>{const o=e.getAttribute("id")||"";e.style.display=o&&o!==t&&"car,moto"!==o?"none":"block"}))}t.forEach(((t,e)=>{t.classList.contains("switch-active")&&(y=e)})),e.style.left=50*y+"%",t.forEach(((o,c)=>{o.addEventListener("click",(()=>{t.forEach((t=>t.classList.remove("switch-active"))),o.classList.add("switch-active"),e.style.left=50*c+"%",h(),w()}))})),o.addEventListener("input",h),c.addEventListener("click",(function(){o.value="",n.forEach((t=>t.classList.remove("active-button"))),h()})),n.forEach((t=>{t.addEventListener("click",p)})),o.addEventListener("focus",(function(){h(),document.querySelector(".regions-dropdown").classList.add("active")})),o.addEventListener("blur",(function(){setTimeout((()=>{document.querySelector(".regions-dropdown").classList.remove("active")}),200)})),r.forEach((t=>{t.querySelector(".region-cities").style.maxHeight=l+"px",t.addEventListener("click",(e=>m.call(t,e)))})),function(){const t=document.querySelector(".regions-dropdown");if(!t)return;const e=Array.from(t.querySelectorAll(".region-dropdown"));e.sort(((t,e)=>t.textContent.localeCompare(e.textContent,void 0,{sensitivity:"base"}))),t.innerHTML="",e.forEach((e=>t.appendChild(e)))}(),h(),w()}));