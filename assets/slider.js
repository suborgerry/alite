document.addEventListener("DOMContentLoaded",(function(){if(window.__sliderInitialized)return;window.__sliderInitialized=!0;const e=document.querySelectorAll(".updated-banner"),n=e.length,t=document.querySelectorAll(".progress-bar");const r=document.querySelector(".banner-viewport");let i=document.querySelector(".active-banner");const s=document.querySelectorAll(".progress-bar .fill");let o,a=!1;function d(t){if("prev"===t)for(let t=n-1;t>=0;t--){const n=e[t].cloneNode(!0);n.classList.remove("active-banner"),n.classList.remove("next-banner"),n.classList.remove("previous-banner"),n.classList.remove("hidden-clone-next"),n.classList.add("hidden-clone-prev"),r.insertBefore(n,r.firstChild)}"next"===t&&e.forEach((e=>{const n=e.cloneNode(!0);n.classList.remove("active-banner"),n.classList.remove("next-banner"),n.classList.remove("previous-banner"),n.classList.remove("hidden-clone-prev"),n.classList.add("hidden-clone-next"),r.appendChild(n)}))}function c(){if(a)return;a=!0;const e=document.querySelector(".active-banner"),t=document.querySelector(".next-banner"),i=document.querySelector(".previous-banner");if(!e||!t||!i)return;i.classList.remove("previous-banner"),e.classList.remove("active-banner"),t.classList.remove("next-banner"),i.classList.add("hidden-clone-prev"),e.classList.add("previous-banner"),t.classList.add("active-banner");let s=t.nextElementSibling;for(;s&&!s.classList.contains("updated-banner");)s=s.nextElementSibling;let o=s?.nextElementSibling;for(;o&&!o.classList.contains("updated-banner");)o=o.nextElementSibling;if(!o){const e=(+document.querySelector(".active-banner").dataset.index+2)%n,t=document.querySelector(`.updated-banner[data-index='${e}']`);if(t){const e=t.cloneNode(!0);e.classList.remove("active-banner","next-banner","previous-banner","hidden-clone-prev"),e.classList.add("updated-banner","hidden-clone-next"),r.appendChild(e);const n=r.querySelector(".updated-banner");n&&r.removeChild(n)}}if(s)s.classList.remove("hidden-clone-next"),s.classList.add("next-banner");else{const e=(+document.querySelector(".active-banner").dataset.index+n+1)%n;const t=document.querySelector(`.updated-banner[data-index='${e}']`).cloneNode(!0);t.classList.remove("active-banner","previous-banner","next-banner","hidden-clone-next","hidden-clone-prev"),t.classList.add("updated-banner","hidden-clone-next"),r.appendChild(t);const i=r.querySelector(".updated-banner");i&&r.removeChild(i),requestAnimationFrame((()=>{t.classList.remove("hidden-clone-next"),t.classList.add("next-banner")}))}setTimeout((()=>{a=!1}),250)}function l(){if(a)return;a=!0;const e=document.querySelector(".active-banner"),t=document.querySelector(".previous-banner"),i=document.querySelector(".next-banner");if(!e||!t||!i)return;i.classList.remove("next-banner"),e.classList.remove("active-banner"),t.classList.remove("previous-banner"),i.classList.add("hidden-clone-next"),e.classList.add("next-banner"),t.classList.add("active-banner");let s=t.previousElementSibling;for(;s&&!s.classList.contains("updated-banner");)s=s.previousElementSibling;let o=s?.previousElementSibling;for(;o&&!o.classList.contains("updated-banner");)o=o.previousElementSibling;if(!o){const e=(+document.querySelector(".active-banner").dataset.index-2+n)%n,t=document.querySelector(`.updated-banner[data-index='${e}']`);if(t){const e=t.cloneNode(!0);e.classList.remove("active-banner","next-banner","previous-banner","hidden-clone-next"),e.classList.add("updated-banner","hidden-clone-prev"),r.insertBefore(e,r.firstChild);const n=r.querySelectorAll(".updated-banner"),i=n[n.length-1];i&&r.removeChild(i)}}if(s)s.classList.remove("hidden-clone-prev"),s.classList.add("previous-banner");else{const e=(+document.querySelector(".active-banner").dataset.index+n-1)%n;const t=document.querySelector(`.updated-banner[data-index='${e}']`).cloneNode(!0);t.classList.remove("active-banner","previous-banner","next-banner","hidden-clone-next","hidden-clone-prev"),t.classList.add("updated-banner","hidden-clone-prev"),r.insertBefore(t,r.firstChild);const i=r.querySelectorAll(".updated-banner"),s=i[i.length-1];s&&r.removeChild(s),requestAnimationFrame((()=>{t.classList.remove("hidden-clone-prev"),t.classList.add("previous-banner")}))}setTimeout((()=>{a=!1}),250)}i.querySelector("img").setAttribute("loading","eager"),i.nextElementSibling.querySelector("img").setAttribute("loading","eager"),i.previousElementSibling.querySelector("img").setAttribute("loading","eager");let u=i.previousElementSibling,b=i.nextElementSibling;function m(){v();const e=function(){const e=document.querySelector(".updated-banner.active-banner");return e?parseInt(e.dataset.index):0}(),n=s[e];n.style.transition="width 3000ms linear",n.style.width="100%",o=setTimeout((()=>{c(),m()}),3e3)}function v(){s.forEach((e=>{e.style.transition="none",e.style.width="0%"})),clearTimeout(o)}u.classList.add("previous-banner"),b.classList.add("next-banner"),document.querySelectorAll(".updated-banner").forEach(((e,n)=>{const t=document.querySelector(".active-banner").dataset.index;n<+t&&!e.classList.contains("previous-banner")&&e.classList.add("hidden-clone-prev"),n>+t&&!e.classList.contains("next-banner")&&e.classList.add("hidden-clone-next")})),document.getElementById("nextSlide").addEventListener("click",(e=>{v(),c(),m()})),document.getElementById("prevSlide").addEventListener("click",(e=>{v(),l(),m()}));let p=0,h=0;r.addEventListener("touchstart",(function(e){p=e.touches[0].clientX}),!1),r.addEventListener("touchend",(function(e){h=e.changedTouches[0].clientX,function(){const e=80;h<p-e&&(v(),c(),m());h>p+e&&(v(),l(),m())}()}),!1),t.forEach((e=>{e.style.height="4px"})),document.querySelectorAll(".banner_link").forEach((e=>{e.addEventListener("click",(function(e){const n=this.getAttribute("href").substring(1);document.getElementById(n)&&(e.preventDefault(),function(e){const n=document.getElementById(e),t=n.querySelector(".product-information_block-button");if(!n)return;const r=n.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop,s=r.top+i,o=window.innerHeight/2-r.height/2;window.scrollTo({top:s-o,behavior:"smooth"}),setTimeout((()=>{const e=n.querySelector(".product-dropdown_block");e&&(e.classList.add("open"),e.classList.contains("open")?t.textContent="{{ 'ts.updated_banner.close' | t }}":t.textContent="{{ 'ts.updated_banner.link' | t }}")}),600)}(n))}))})),setTimeout((()=>{d("prev"),d("next"),m()}),2e3)}));